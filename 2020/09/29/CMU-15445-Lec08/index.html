<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="ttc5vA8Af6vd2hXb70GjZI6v_4fuOJtjeIekoyhEbhw" />
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.svg">
  <link rel="mask-icon" href="/images/favicon.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cakebytheoceanluo.github.io","root":"/","scheme":"Pisces","version":"7.7.2","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Tree Indexes Part II - 树索引 II Slide: https:&#x2F;&#x2F;15445.courses.cs.cmu.edu&#x2F;fall2019&#x2F;slides&#x2F;08-trees2.pdfNote: https:&#x2F;&#x2F;15445.courses.cs.cmu.edu&#x2F;fall2019&#x2F;notes&#x2F;08-trees2.pdfReadings:  Chapter 11.1-11.4 Datab">
<meta property="og:type" content="article">
<meta property="og:title" content="[CMU-15445]Lec08 Tree Indexes Part II - 树索引 II">
<meta property="og:url" content="https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/index.html">
<meta property="og:site_name" content="关于数据库的一切">
<meta property="og:description" content="Tree Indexes Part II - 树索引 II Slide: https:&#x2F;&#x2F;15445.courses.cs.cmu.edu&#x2F;fall2019&#x2F;slides&#x2F;08-trees2.pdfNote: https:&#x2F;&#x2F;15445.courses.cs.cmu.edu&#x2F;fall2019&#x2F;notes&#x2F;08-trees2.pdfReadings:  Chapter 11.1-11.4 Datab">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/1.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/3.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/4.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/5.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/6.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/7.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/8.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/9.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/10.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/11.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/12.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/13.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/14.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/15.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/16.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/18.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/19.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/20.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/22.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/24.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/25.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/26.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/28.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/29.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/30.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/33.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/34.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/36.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/37.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/38.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/40.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/41.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/42.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/43.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/44.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/45.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/46.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/47.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/48.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/49.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/50.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/51.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/52.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/53.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/54.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/55.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/56.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/57.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/59.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/60.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/61.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/62.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/63.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/64.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/65.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/66.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/67.jpg">
<meta property="og:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/68.jpg">
<meta property="article:published_time" content="2020-09-29T21:46:02.000Z">
<meta property="article:modified_time" content="2020-10-02T07:40:08.702Z">
<meta property="article:author" content="罗济高">
<meta property="article:tag" content="B Tree">
<meta property="article:tag" content="Indexing">
<meta property="article:tag" content="Trie &#x2F; Radix Tree">
<meta property="article:tag" content="Additional Index Usage">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cakebytheoceanluo.github.io/images/CMU1544564/Lec08/1.jpg">

<link rel="canonical" href="https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>[CMU-15445]Lec08 Tree Indexes Part II - 树索引 II | 关于数据库的一切</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bff369b4d0627249d230e2ae930016fc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="关于数据库的一切" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">关于数据库的一切</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">罗济高的博客</h1>
      
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">84</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">37</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">98</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Nha2VieXRoZW9jZWFuTHVv" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpeg">
      <meta itemprop="name" content="罗济高">
      <meta itemprop="description" content="In theory, there is no difference between theory and practice. But, in practice, there is.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="关于数据库的一切">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          [CMU-15445]Lec08 Tree Indexes Part II - 树索引 II
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-29 23:46:02" itemprop="dateCreated datePublished" datetime="2020-09-29T23:46:02+02:00">2020-09-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-02 09:40:08" itemprop="dateModified" datetime="2020-10-02T09:40:08+02:00">2020-10-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Access-Methods/" itemprop="url" rel="index"><span itemprop="name">Access Methods</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CMU-15445/" itemprop="url" rel="index"><span itemprop="name">CMU-15445</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/B-Tree/" itemprop="url" rel="index"><span itemprop="name">B Tree</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Structure/" itemprop="url" rel="index"><span itemprop="name">Data Structure</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Indexing/" itemprop="url" rel="index"><span itemprop="name">Indexing</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Trie-Radix-Tree/" itemprop="url" rel="index"><span itemprop="name">Trie / Radix Tree</span></a>
                </span>
            </span>

          
            <span id="/2020/09/29/CMU-15445-Lec08/" class="post-meta-item leancloud_visitors" data-flag-title="[CMU-15445]Lec08 Tree Indexes Part II - 树索引 II" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Tree Indexes Part II - 树索引 II</p>
<p>Slide: <span class="exturl" data-url="aHR0cHM6Ly8xNTQ0NS5jb3Vyc2VzLmNzLmNtdS5lZHUvZmFsbDIwMTkvc2xpZGVzLzA4LXRyZWVzMi5wZGY=" title="https://15445.courses.cs.cmu.edu/fall2019/slides/08-trees2.pdf">https://15445.courses.cs.cmu.edu/fall2019/slides/08-trees2.pdf<i class="fa fa-external-link"></i></span><br>Note: <span class="exturl" data-url="aHR0cHM6Ly8xNTQ0NS5jb3Vyc2VzLmNzLmNtdS5lZHUvZmFsbDIwMTkvbm90ZXMvMDgtdHJlZXMyLnBkZg==" title="https://15445.courses.cs.cmu.edu/fall2019/notes/08-trees2.pdf">https://15445.courses.cs.cmu.edu/fall2019/notes/08-trees2.pdf<i class="fa fa-external-link"></i></span><br>Readings:  Chapter 11.1-11.4</p>
<p>Database Tree Indexes 在CMU分成了两部分，在两节课中讲。这是第二部分。</p>
<p>这节课中，我们会学习数据库的中使用的除了B+树以外的树，这节课依然很数据结构。</p>
<p>因此，延续数据结构的思路，大家上完这节课可以思考一下，为什么我们没有见到我们学过的其他数据结构 - Binary Tree, AVL Tree, Red Black Tree? 它们适合数据库吗?</p>
<a id="more"></a>
<p><img data-src="/images/CMU1544564/Lec08/1.jpg" alt="1.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/3.jpg" alt="3.jpg"></p>
<p><br></p>
<h2 id="Duplicate-Keys"><a href="#Duplicate-Keys" class="headerlink" title="Duplicate Keys"></a>Duplicate Keys</h2><p><img data-src="/images/CMU1544564/Lec08/4.jpg" alt="4.jpg"></p>
<ul>
<li>处理Duplicate Keys有两种方法: Append Record Id, Overflow Leaf Nodes。我们下面会用例子去了解这两种作法。</li>
</ul>
<h3 id="Append-Record-Id"><a href="#Append-Record-Id" class="headerlink" title="Append Record Id"></a>Append Record Id</h3><p>我们之前提到过Record Id, 见<a href="https://cakebytheoceanluo.github.io/2020/03/11/CMU-15445-Lec03/#Record-ids-%E2%80%94-Unique-identifier">[CMU-15445] Lec03 Database Storage Part I - 数据库存储 I -Record ids - Unique identifier</a></p>
<p>Record Id又称RID，它代表对应元素存储的位置， 自然这个位置可以确定唯一的元素。</p>
<p><br></p>
<p>Append Record Id方法中: 我们即存储Key(可以重复), 也存储Record Id(不可能重复)。</p>
<p>比如下图中的<code>1</code>实际在page中的表示是<code>1 | record id of 1</code>:</p>
<p><img data-src="/images/CMU1544564/Lec08/5.jpg" alt="5.jpg"></p>
<h4 id="例子-Insert-6"><a href="#例子-Insert-6" class="headerlink" title="例子: Insert 6"></a>例子: Insert 6</h4><p>树中已经有了一个<code>6</code>, 我们假设它实际上是<code>6 | record id x</code>。另外我们还希望再插入另外一个<code>6</code>, 我们先将这个新的<code>6</code>存储在<code>record id y</code>，那么它在树中对应的表达应该是<code>6 | record id y</code>, 我们将这个对 插入树中:</p>
<p><img data-src="/images/CMU1544564/Lec08/6.jpg" alt="6.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/7.jpg" alt="7.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/8.jpg" alt="8.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/9.jpg" alt="9.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/10.jpg" alt="10.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/11.jpg" alt="11.jpg"></p>
<p><br></p>
<h3 id="Overflow-Leaf-Nodes"><a href="#Overflow-Leaf-Nodes" class="headerlink" title="Overflow Leaf Nodes"></a>Overflow Leaf Nodes</h3><p>Overflow Leaf Nodes使用另外一种方式，我们不再存储record id, 而是将重复的key存储在另外一个page上， 称为overflow page。这个page上我们选择不排序，同时还允许数值重复出现。我们每次插入在这个page的最后端。如果我们需要在overflow leaft nodes搜索数值，需要采取linear search, 原因是数值没有被排序。</p>
<p>具体见下列例子: </p>
<h4 id="Insert-6-7-6"><a href="#Insert-6-7-6" class="headerlink" title="Insert 6, 7, 6"></a>Insert 6, 7, 6</h4><p><img data-src="/images/CMU1544564/Lec08/12.jpg" alt="12.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/13.jpg" alt="13.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/14.jpg" alt="14.jpg"></p>
<p>overflow leaf nodes如果满了，依然还可以去增加新的overflow page给它。</p>
<hr>
<h1 id="SQL-Demo"><a href="#SQL-Demo" class="headerlink" title="SQL Demo"></a>SQL Demo</h1><p><img data-src="/images/CMU1544564/Lec08/15.jpg" alt="15.jpg"></p>
<p>更多关于这个 Demo 实验，见:</p>
<ul>
<li><a href="https://cakebytheoceanluo.github.io/2020/04/13/DBMS-Hash-Index%E4%B8%8ETree-Index/">[DBMS] Hash Index 与 Tree Index</a></li>
<li><a href="https://cakebytheoceanluo.github.io/2020/04/15/DBMS-Cluster-Index/">[DBMS] Cluster Index</a></li>
<li><a href="https://cakebytheoceanluo.github.io/2020/04/14/DBMS-Tree-Index-pageinspect/">[DBMS] Tree Index pageinspect 索引页面内容
</a></li>
</ul>
<hr>
<h1 id="Additional-Index-Usage"><a href="#Additional-Index-Usage" class="headerlink" title="Additional Index Usage"></a>Additional Index Usage</h1><h2 id="Implicit-Indexes"><a href="#Implicit-Indexes" class="headerlink" title="Implicit Indexes"></a>Implicit Indexes</h2><blockquote>
<p>Implicit Indexes: Most DBMSs will automatically create an index to enforce integrity constraints (e.g., primary keys, unique constraints)</p>
</blockquote>
<h3 id="SERIAL-PRIMARY-KEY-UNIQUE"><a href="#SERIAL-PRIMARY-KEY-UNIQUE" class="headerlink" title="SERIAL PRIMARY KEY, UNIQUE"></a><code>SERIAL PRIMARY KEY</code>, <code>UNIQUE</code></h3><p><code>SERIAL PRIMARY KEY</code>, <code>UNIQUE</code>这些integrity constraint可以确定数值的<strong>唯一性</strong>。因此大多数数据库会给它们自动建立索引。</p>
<p><img data-src="/images/CMU1544564/Lec08/16.jpg" alt="16.jpg"></p>
<h3 id="REFERENCES-foreign-key"><a href="#REFERENCES-foreign-key" class="headerlink" title="REFERENCES - foreign key"></a><code>REFERENCES</code> - foreign key</h3><p>但是对<code>REFERENCES</code> - foreign key不会自动建立索引，因为foreign key对应的数值不一定是唯一的。比如下面的<code>foo.val1</code>是另外一个关系<code>bar</code>的外键foreign key, 但不会给它新建索引，原因是<code>foo.val1</code>可以是有重复值的。</p>
<p><img data-src="/images/CMU1544564/Lec08/18.jpg" alt="18.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/19.jpg" alt="19.jpg"></p>
<p><br></p>
<p><code>foo.val1</code>如果是<code>UNIQUE</code>的话，那对它建立索引也变得合理了。</p>
<p><img data-src="/images/CMU1544564/Lec08/20.jpg" alt="20.jpg"></p>
<h2 id="Partial-Indexes"><a href="#Partial-Indexes" class="headerlink" title="Partial Indexes"></a>Partial Indexes</h2><blockquote>
<p>Partial Indexes: Create an index on a subset of the entire table. This potentially reduces size and the amount of overhead to maintain it.</p>
</blockquote>
<p>Partial Indexes并不对整个关系中的所有tuple建立索引，只是对其中的一部分建立索引。下列例子中，只是对符合<code>foo.c = 'WuTang'</code>的tuple建立索引，因此也只能对这些tuple应用索引加速。</p>
<p><img data-src="/images/CMU1544564/Lec08/22.jpg" alt="22.jpg"></p>
<h2 id="Covering-Indexes"><a href="#Covering-Indexes" class="headerlink" title="Covering Indexes"></a>Covering Indexes</h2><blockquote>
<p>Covering Indexes: All attributes needed to process the query are available in an index, then the DBMS does not need to retrieve the tuple. The DBMS can complete the entire query just based on the data available in the index.</p>
</blockquote>
<p>Covering Indexes意味我们可以直接从index索引数据结构中获得数据，不需要跳到table存储的位置再读取信息。这样能带来更好的look up性能，但是也意味着index建立需要更长时间，index数据结构需要占据更多存储位置。因为数据被<strong>复制</strong>, 在table存储也被在index中存储，每一次数据变动都需要更新两个地方。</p>
<p><img data-src="/images/CMU1544564/Lec08/24.jpg" alt="24.jpg"></p>
<h2 id="Index-Include-Columns"><a href="#Index-Include-Columns" class="headerlink" title="Index Include Columns"></a>Index Include Columns</h2><p>Index Include Columns在Covering Indexes的基础上，再存储了另外的字段。这个<strong>另外的字段</strong>并不进入index索引判断，只是为了避免跳到table存储的位置再读取信息，提高性能。</p>
<p>这词很有趣，piggyback，<strong>另外的字段</strong>也就是被捎带的。它不会被存储在inner node, 因为不起到索引的作用。但是被存储在leaf node中。</p>
<p><img data-src="/images/CMU1544564/Lec08/25.jpg" alt="25.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/26.jpg" alt="26.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/28.jpg" alt="28.jpg"></p>
<h2 id="Functional-Expression-Indexes"><a href="#Functional-Expression-Indexes" class="headerlink" title="Functional / Expression Indexes"></a>Functional / Expression Indexes</h2><blockquote>
<p>Function/Expression Indexes: Store the output of a function or expression as the key instead of the original value. It is the DBMS’s job to recognize which queries can use that index.</p>
</blockquote>
<p><code>EXTRACT(dow FROM login) = 2</code>:</p>
<ul>
<li><code>dow</code> := day of week</li>
<li><code>EXTRACT(dow FROM login)</code> 从<code>login</code>这个时间点中获得<code>dow</code></li>
<li><code>EXTRACT(dow FROM login) = 2</code> 要求login时间点对应星期二</li>
</ul>
<p>对于<code>login</code>内部读取出的<code>dow</code>数据，针对<code>login</code>的索引不能帮助我们。</p>
<p><img data-src="/images/CMU1544564/Lec08/29.jpg" alt="29.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/30.jpg" alt="30.jpg"></p>
<p><br></p>
<p>Function/Expression Indexes在这种情况能帮助我们，它可以针对<code>login</code>中读取出的<code>dow</code>建立索引。</p>
<p>另外这种情况，我们上面见到的Pratial Index也可以帮助我们。具体情况，具体分析。</p>
<p><img data-src="/images/CMU1544564/Lec08/33.jpg" alt="33.jpg"></p>
<h1 id="实验部分"><a href="#实验部分" class="headerlink" title="实验部分"></a>实验部分</h1><h2 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h2><p>数据集导入和使用见: <a href="https://cakebytheoceanluo.github.io/2020/03/15/DBMS-PostgreSQL%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E9%9B%86/#%E6%97%B6%E9%97%B4%E6%95%B0%E6%8D%AE%E9%9B%86">[DBMS] PostgreSQL 导入数据集 - 时间数据集</a></p>
<h2 id="实验准备"><a href="#实验准备" class="headerlink" title="实验准备"></a>实验准备</h2><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">testdb=# <span class="built_in">set</span> max_parallel_workers_per_gather = <span class="number">0</span>;</span><br><span class="line">SET</span><br><span class="line">testdb=# CREATE EXTENSION pg_prewarm;</span><br><span class="line">CREATE EXTENSION</span><br><span class="line">testdb=# SELECT pg_prewarm('users');</span><br><span class="line"> pg_prewarm </span><br><span class="line">------------</span><br><span class="line">      <span class="number">15023</span></span><br><span class="line">(<span class="number">1</span> row)</span><br><span class="line">testdb=# \timing</span><br><span class="line">Timing is on.</span><br></pre></td></tr></tbody></table></figure>
<h2 id="实验主体"><a href="#实验主体" class="headerlink" title="实验主体"></a>实验主体</h2><h3 id="无Index"><a href="#无Index" class="headerlink" title="无Index"></a>无Index</h3><p>无index的情况下，只能使用sequantial scan:</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">testdb=# SELECT AVG(id) FROM users WHERE EXTRACT(dow FROM login) = <span class="number">2</span>;</span><br><span class="line">         avg          </span><br><span class="line">----------------------</span><br><span class="line"> <span class="number">1388880.500000000000</span></span><br><span class="line">(<span class="number">1</span> row)</span><br><span class="line"></span><br><span class="line">Time: <span class="number">607.678</span> ms</span><br><span class="line">testdb=# EXPLAIN SELECT AVG(id) FROM users WHERE EXTRACT(dow FROM login) = <span class="number">2</span>;</span><br><span class="line">                               QUERY PLAN                                </span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line"> Aggregate  (cost=<span class="number">56744.81</span>.<span class="number">.56744</span><span class="number">.82</span> rows=<span class="number">1</span> <span class="built_in">width</span>=<span class="number">32</span>)</span><br><span class="line">   -&gt;  <span class="function">Seq Scan on <span class="title">users</span>  <span class="params">(cost=<span class="number">0.00</span>.<span class="number">.56710</span><span class="number">.07</span> rows=<span class="number">13896</span> <span class="built_in">width</span>=<span class="number">4</span>)</span></span></span><br><span class="line">         Filter: (date_part('dow'::text, login) = '2'::double precision)</span><br><span class="line">(<span class="number">3</span> rows)</span><br><span class="line"></span><br><span class="line">Time: <span class="number">0.789</span> ms</span><br></pre></td></tr></tbody></table></figure>
<h3 id="有Index"><a href="#有Index" class="headerlink" title="有Index"></a>有Index</h3><p>我们使用了Function/Expression Index来优化查询，这样每次查询的时间缩短了很多。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">testdb=# CREATE INDEX idx_user_login_partial ON users (login) WHERE EXTRACT(dow FROM login) = <span class="number">2</span>;</span><br><span class="line">CREATE INDEX</span><br><span class="line">testdb: <span class="number">805.588</span> ms</span><br><span class="line">time=# SELECT AVG(id) FROM users WHERE EXTRACT(dow FROM login) = <span class="number">2</span>;</span><br><span class="line">         avg          </span><br><span class="line">----------------------</span><br><span class="line"> <span class="number">1388880.500000000000</span></span><br><span class="line">(<span class="number">1</span> row)</span><br><span class="line"></span><br><span class="line">Time: <span class="number">67.753</span> ms</span><br><span class="line">testdb=# EXPLAIN SELECT AVG(id) FROM users WHERE EXTRACT(dow FROM login) = <span class="number">2</span>;</span><br><span class="line">                                           QUERY PLAN                                           </span><br><span class="line">------------------------------------------------------------------------------------------------</span><br><span class="line"> Aggregate  (cost=<span class="number">478.61</span>.<span class="number">.478</span><span class="number">.62</span> rows=<span class="number">1</span> <span class="built_in">width</span>=<span class="number">32</span>)</span><br><span class="line">   -&gt;  <span class="function">Index Scan <span class="keyword">using</span> idx_user_login_partial on <span class="title">users</span>  <span class="params">(cost=<span class="number">0.42</span>.<span class="number">.443</span><span class="number">.86</span> rows=<span class="number">13896</span> <span class="built_in">width</span>=<span class="number">4</span>)</span></span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">2</span> rows)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line">Time: 0.464 ms</span><br></pre></td></tr></tbody></table></figure>
<hr>
<h1 id="Observation-1"><a href="#Observation-1" class="headerlink" title="Observation 1"></a>Observation 1</h1><p>如果我们想在B+ Tree中搜索一个明知道不存在的key， 我们需要从root node经过inner node，到达leaf node，在遍历leaf node完以后，才能最终发现这个key不存在。</p>
<p><img data-src="/images/CMU1544564/Lec08/34.jpg" alt="34.jpg"></p>
<h1 id="Trie-Index"><a href="#Trie-Index" class="headerlink" title="Trie Index"></a>Trie Index</h1><p>Trie Index是另外一种树型tree-like的数据结构。它能解决我们上面的观察，它能搜索的途中发现一个key不存在于树中，不必从root到leaf。</p>
<p>Trie Index也称为: Digital Search Tree, Prefix Tree。 <strong>Radix Tree是Trie Tree的一种。</strong></p>
<p>Digital Representation: 可以是Bit, Byte, Char, Digit</p>
<p>Key不会以一个整体的形式直接出现，而是被解体分开decomponent至每一层。我们可以从路径(从root至leaf方向)中读出key。</p>
<p>下图中的最后的红色标志: 可以是对应的Record ID</p>
<p><img data-src="/images/CMU1544564/Lec08/36.jpg" alt="36.jpg"></p>
<h2 id="Trie-Index-Properties-vs-B-Tree-Properties"><a href="#Trie-Index-Properties-vs-B-Tree-Properties" class="headerlink" title="Trie Index Properties vs. B+ Tree Properties"></a>Trie Index Properties vs. B+ Tree Properties</h2><blockquote>
<p>A radix tree is a variant of a trie data structure. It uses digital representation of keys to examine prefixes one-by-one instead of comparing entire key. It is different than a trie in that there is not a node for each element in key, nodes are consolidated to represent the largest prefix before keys differ.</p>
<p>The height of tree depends on the length of keys and not the number of keys like in a + Tree. The path to a leaf nodes represents the key of the leaf. Not all attribute types can be decomposed into binary comparable digits for a radix tree.</p>
</blockquote>
<p><br></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>-</th>
<th>Trie Index</th>
<th>B+ Tree</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>树形状</strong></td>
<td>确定，不会根据insert的先后顺序变化。树形状的确定性由key的特征决定: 长度</td>
<td>不确定，会根据insert的先后顺序变化。有不同形状的树，但是它们包含的key是一样的。</td>
</tr>
<tr>
<td><strong>自平衡re-balance</strong></td>
<td>不需要</td>
<td>需要</td>
</tr>
<tr>
<td><strong>确定key是否存在</strong></td>
<td>不必须从root到leaf</td>
<td>必须从root到leaf</td>
</tr>
<tr>
<td><strong>key存储</strong></td>
<td>key不直接(implicitly stored)出现在树中。需要从root读到leaf, 才能间接地重建re-constructkey</td>
<td>key肯定直接存在于leaf node中，部分key另外还出现在root node和inner node中</td>
</tr>
<tr>
<td><strong>lookup, insert, delete - point query</strong></td>
<td>$O(k)$, k := length of the key， 大概率更快</td>
<td>$O(\log(n))$, n := number of keys， 大概率更慢</td>
</tr>
<tr>
<td><strong>sequential scan - range query</strong></td>
<td>leaf node间的sequential scan无意义。sequential scan相对繁琐，而且效率一般。每次遇到一个分岔，需要记录(track path), 遍历完一个分支以后，需要遍历分岔的其他分支。 — DFS深度搜索</td>
<td>可以进行leaf node间的sequential scan。非常简单且高效(sequential I/O)</td>
</tr>
</tbody>
</table>
</div>
<p><img data-src="/images/CMU1544564/Lec08/37.jpg" alt="37.jpg"></p>
<h2 id="Trie-Key-Span"><a href="#Trie-Key-Span" class="headerlink" title="Trie Key Span"></a>Trie Key Span</h2><p>Span:= 指的是key对应的进制编码</p>
<p>1-bit Span Trie:= 存储2进制的key，每一个node的分支数fan-out是2， 即0和1这两种可能。也叫2-way Trie。</p>
<p><img data-src="/images/CMU1544564/Lec08/38.jpg" alt="38.jpg"></p>
<h3 id="1-bit-Span-Trie例子"><a href="#1-bit-Span-Trie例子" class="headerlink" title="1-bit Span Trie例子"></a>1-bit Span Trie例子</h3><p>我们存储3个key: 10, 25, 31到下面的1-bit Span Trie中，具体key的二进制表达见下图:</p>
<p><img data-src="/images/CMU1544564/Lec08/40.jpg" alt="40.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/41.jpg" alt="41.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/42.jpg" alt="42.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/43.jpg" alt="43.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/44.jpg" alt="44.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/45.jpg" alt="45.jpg"></p>
<h3 id="优化1-horizontal-compreesion"><a href="#优化1-horizontal-compreesion" class="headerlink" title="优化1: horizontal compreesion"></a>优化1: horizontal compreesion</h3><p>因为是1-bit Span Trie，我们<strong>总是</strong>有两种选择: 0和1。我们可以不必存储0和1:</p>
<p><img data-src="/images/CMU1544564/Lec08/46.jpg" alt="46.jpg"></p>
<h3 id="优化2-vertical-compreesion"><a href="#优化2-vertical-compreesion" class="headerlink" title="优化2: vertical compreesion"></a>优化2: vertical compreesion</h3><p>另外如果当前路径已经确定 <strong>专属于一个key (single match)</strong> 的话，我们可以在最先可以确定唯一性的地方提前终止，提供指向tuple的record ID。这样能够减少存储量 - vertical compreesion。同时也可以提高性能。这样的树也被称为: <strong>Patricia Tree</strong>。</p>
<p>下图红圈的部分都是可以唯一确定key的，因此红圈部分被压缩，提前终止:</p>
<p><img data-src="/images/CMU1544564/Lec08/47.jpg" alt="47.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/48.jpg" alt="48.jpg"></p>
<p><br></p>
<h2 id="Insert-Delete"><a href="#Insert-Delete" class="headerlink" title="Insert, Delete"></a>Insert, Delete</h2><p>Radix Tree没特定的Modification算法。但是insert, delete都不困难。</p>
<p>Radix Tree允许多个字母一个节点，不同于Trie Tree。</p>
<h3 id="Insert-HAIR"><a href="#Insert-HAIR" class="headerlink" title="Insert HAIR"></a>Insert HAIR</h3><p><img data-src="/images/CMU1544564/Lec08/49.jpg" alt="49.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/50.jpg" alt="50.jpg"></p>
<h3 id="Delete-HAT"><a href="#Delete-HAT" class="headerlink" title="Delete HAT"></a>Delete HAT</h3><p><img data-src="/images/CMU1544564/Lec08/51.jpg" alt="51.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/52.jpg" alt="52.jpg"></p>
<h3 id="Delete-HAVE"><a href="#Delete-HAVE" class="headerlink" title="Delete HAVE"></a>Delete HAVE</h3><p><img data-src="/images/CMU1544564/Lec08/53.jpg" alt="53.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/54.jpg" alt="54.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/55.jpg" alt="55.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/56.jpg" alt="56.jpg"></p>
<p>最后一步中，我们尽可能的merge不必要的分岔，这样我们可以更早的去搜速到<code>HAIR</code></p>
<p><br></p>
<h2 id="Binary-Comparable-Keys"><a href="#Binary-Comparable-Keys" class="headerlink" title="Binary Comparable Keys"></a>Binary Comparable Keys</h2><p>(这部分Fall2019 上课没有讲, 我去看Fall2018。)</p>
<p>Trie Tree中如果使用Big Endian的表达，即从高位bit代表高位数字。那么我们需要从机器的Little Endian中倒转顺序。(X86的绝大部分CPU都是使用Little Endian)</p>
<p><img data-src="/images/CMU1544564/Lec08/57.jpg" alt="57.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/59.jpg" alt="59.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/60.jpg" alt="60.jpg"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; hex(168496141)</span><br><span class="line"><span class="string">'0xa0b0c0d'</span></span><br><span class="line">&gt;&gt;&gt; hex(658205)</span><br><span class="line"><span class="string">'0xa0b1d'</span></span><br></pre></td></tr></tbody></table></figure>
<p><br><br><br></p>
<h1 id="Observation-2"><a href="#Observation-2" class="headerlink" title="Observation 2"></a>Observation 2</h1><p>Tree Index只适合做point query和range query， 而不是适合做keyword search:</p>
<p><img data-src="/images/CMU1544564/Lec08/61.jpg" alt="61.jpg"></p>
<h2 id="Wikipedia-Example"><a href="#Wikipedia-Example" class="headerlink" title="Wikipedia Example"></a>Wikipedia Example</h2><p><img data-src="/images/CMU1544564/Lec08/62.jpg" alt="62.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/63.jpg" alt="63.jpg"></p>
<p>上面的SQL并不正确: 会搜索到<code>Pavlote</code>这样将<code>Pavlo</code>当做substring的词。</p>
<h1 id="Inverted-Index"><a href="#Inverted-Index" class="headerlink" title="Inverted Index"></a>Inverted Index</h1><p><img data-src="/images/CMU1544564/Lec08/64.jpg" alt="64.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/65.jpg" alt="65.jpg"></p>
<p><img data-src="/images/CMU1544564/Lec08/66.jpg" alt="66.jpg"></p>
<p>实际上这部分已经完全不再是课程的重点了，这些特殊的数据库甚至不再是关系数据库，关系表格的联系也在弱化。我提几个关键词和链接，大家可以自行了解:</p>
<ul>
<li>SPARQL</li>
<li>Linked Open Data Cloud</li>
<li>RDF datasets </li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kYi5pbi50dW0uZGUvdGVhY2hpbmcvd3MxOTIwL2ZvdW5kYXRpb25zZGUvY2hhcHRlcjYucGRmP2xhbmc9ZGU=" title="https://db.in.tum.de/teaching/ws1920/foundationsde/chapter6.pdf?lang=de">TUM - Foundations in Data Engineering - Other Data Models<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kYi5pbi50dW0uZGUvdGVhY2hpbmcvd3MxOTIwL2ZvdW5kYXRpb25zZGUvUkRGUXVlcnlPcHQucGRmP2xhbmc9ZGU=" title="https://db.in.tum.de/teaching/ws1920/foundationsde/RDFQueryOpt.pdf?lang=de">TUM - Foundations in Data Engineering - RDF Query Optimization<i class="fa fa-external-link"></i></span></li>
</ul>
<p>另外推荐论文: <span class="exturl" data-url="aHR0cHM6Ly9kYi5pbi50dW0uZGUvfmxlaXMvcGFwZXJzL0FSVC5wZGY=" title="https://db.in.tum.de/~leis/papers/ART.pdf">The Adaptive Radix Tree: ARTful Indexing for Main-Memory Databases
<i class="fa fa-external-link"></i></span></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p><img data-src="/images/CMU1544564/Lec08/67.jpg" alt="67.jpg"></p>
<ul>
<li>CMU 11-442 Search Engines: <span class="exturl" data-url="aHR0cHM6Ly9ib3N0b24ubHRpLmNzLmNtdS5lZHUvY2xhc3Nlcy8xMS02NDIv" title="https://boston.lti.cs.cmu.edu/classes/11-642/">https://boston.lti.cs.cmu.edu/classes/11-642/<i class="fa fa-external-link"></i></span></li>
<li>CMU 15-826 Multimedia Databases and Data Mining: <span class="exturl" data-url="aHR0cHM6Ly93d3cuY3MuY211LmVkdS9+Y2hyaXN0b3MvY291cnNlcy84MjYuUzE3Lw==" title="https://www.cs.cmu.edu/~christos/courses/826.S17/">https://www.cs.cmu.edu/~christos/courses/826.S17/<i class="fa fa-external-link"></i></span></li>
</ul>
<p><img data-src="/images/CMU1544564/Lec08/68.jpg" alt="68.jpg"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>罗济高
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/" title="[CMU-15445]Lec08 Tree Indexes Part II - 树索引 II">https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzQuMC8="><i class="fa fa-fw fa-creative-commons"></i>BY-NC</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

            <div class="social-item">
              <a target="_blank" class="social-link" href="/atom.xml">
                <span class="icon">
                  <i class="fa fa-rss"></i>
                </span>

                <span class="label">RSS</span>
              </a>
            </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/B-Tree/" rel="tag"><i class="fa fa-tag"></i> B Tree</a>
              <a href="/tags/Indexing/" rel="tag"><i class="fa fa-tag"></i> Indexing</a>
              <a href="/tags/Trie-Radix-Tree/" rel="tag"><i class="fa fa-tag"></i> Trie / Radix Tree</a>
              <a href="/tags/Additional-Index-Usage/" rel="tag"><i class="fa fa-tag"></i> Additional Index Usage</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/08/17/CMU-15445-19-Projet1-disk-manager/" rel="prev" title="[CMU-15445]19_Projet1_disk_manager">
      <i class="fa fa-chevron-left"></i> [CMU-15445]19_Projet1_disk_manager
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/10/01/B-Tree-Exercise/" rel="next" title="B Tree 练习">
      B Tree 练习 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="cakebytheoceanLuo/cakebytheoceanLuo.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Duplicate-Keys"><span class="nav-number">1.</span> <span class="nav-text">Duplicate Keys</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Append-Record-Id"><span class="nav-number">1.1.</span> <span class="nav-text">Append Record Id</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#例子-Insert-6"><span class="nav-number">1.1.1.</span> <span class="nav-text">例子: Insert 6</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overflow-Leaf-Nodes"><span class="nav-number">1.2.</span> <span class="nav-text">Overflow Leaf Nodes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Insert-6-7-6"><span class="nav-number">1.2.1.</span> <span class="nav-text">Insert 6, 7, 6</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL-Demo"><span class="nav-number"></span> <span class="nav-text">SQL Demo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Additional-Index-Usage"><span class="nav-number"></span> <span class="nav-text">Additional Index Usage</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Implicit-Indexes"><span class="nav-number">1.</span> <span class="nav-text">Implicit Indexes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SERIAL-PRIMARY-KEY-UNIQUE"><span class="nav-number">1.1.</span> <span class="nav-text">SERIAL PRIMARY KEY, UNIQUE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#REFERENCES-foreign-key"><span class="nav-number">1.2.</span> <span class="nav-text">REFERENCES - foreign key</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Partial-Indexes"><span class="nav-number">2.</span> <span class="nav-text">Partial Indexes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Covering-Indexes"><span class="nav-number">3.</span> <span class="nav-text">Covering Indexes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Index-Include-Columns"><span class="nav-number">4.</span> <span class="nav-text">Index Include Columns</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Functional-Expression-Indexes"><span class="nav-number">5.</span> <span class="nav-text">Functional &#x2F; Expression Indexes</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#实验部分"><span class="nav-number"></span> <span class="nav-text">实验部分</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据集"><span class="nav-number">1.</span> <span class="nav-text">数据集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实验准备"><span class="nav-number">2.</span> <span class="nav-text">实验准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实验主体"><span class="nav-number">3.</span> <span class="nav-text">实验主体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#无Index"><span class="nav-number">3.1.</span> <span class="nav-text">无Index</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有Index"><span class="nav-number">3.2.</span> <span class="nav-text">有Index</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Observation-1"><span class="nav-number"></span> <span class="nav-text">Observation 1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Trie-Index"><span class="nav-number"></span> <span class="nav-text">Trie Index</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Trie-Index-Properties-vs-B-Tree-Properties"><span class="nav-number">1.</span> <span class="nav-text">Trie Index Properties vs. B+ Tree Properties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Trie-Key-Span"><span class="nav-number">2.</span> <span class="nav-text">Trie Key Span</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-bit-Span-Trie例子"><span class="nav-number">2.1.</span> <span class="nav-text">1-bit Span Trie例子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化1-horizontal-compreesion"><span class="nav-number">2.2.</span> <span class="nav-text">优化1: horizontal compreesion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化2-vertical-compreesion"><span class="nav-number">2.3.</span> <span class="nav-text">优化2: vertical compreesion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Insert-Delete"><span class="nav-number">3.</span> <span class="nav-text">Insert, Delete</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Insert-HAIR"><span class="nav-number">3.1.</span> <span class="nav-text">Insert HAIR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-HAT"><span class="nav-number">3.2.</span> <span class="nav-text">Delete HAT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-HAVE"><span class="nav-number">3.3.</span> <span class="nav-text">Delete HAVE</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Binary-Comparable-Keys"><span class="nav-number">4.</span> <span class="nav-text">Binary Comparable Keys</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Observation-2"><span class="nav-number"></span> <span class="nav-text">Observation 2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Wikipedia-Example"><span class="nav-number">1.</span> <span class="nav-text">Wikipedia Example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inverted-Index"><span class="nav-number"></span> <span class="nav-text">Inverted Index</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Conclusion"><span class="nav-number"></span> <span class="nav-text">Conclusion</span></a></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="罗济高"
      src="/uploads/avatar.jpeg">
  <p class="site-author-name" itemprop="name">罗济高</p>
  <div class="site-description" itemprop="description">In theory, there is no difference between theory and practice. But, in practice, there is.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Nha2VieXRoZW9jZWFuTHVv" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cakebytheoceanLuo"><i class="fa fa-fw fa-github"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOmx1b2ppZ2FvQG91dGxvb2suY29t" title="E-Mail → mailto:luojigao@outlook.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9sdW8tamktZ2Fv" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;luo-ji-gao"><i class="fa fa-fw fa-zhihu"></i>知乎</span>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzQuMC8="><img src="/images/cc-by-nc.svg" alt="Creative Commons"></span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      其他信息
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="/download/pgp/pgp_key_id.pgp" title="&#x2F;download&#x2F;pgp&#x2F;pgp_key_id.pgp">GPG Key Id： F98069D551217BFD</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="/download/pgp/pgp_fingerprint.pgp" title="&#x2F;download&#x2F;pgp&#x2F;pgp_fingerprint.pgp">GPG Fingerprint：704A 7537 4771 2348 81B1 0559 F980 69D5 5121 7BFD</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="/download/pgp/luojigao@outlook.com.pgp" title="&#x2F;download&#x2F;pgp&#x2F;luojigao@outlook.com.pgp">Download Public Key</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">罗济高</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">476k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:12</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.dataset.flagTitle;

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
              leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=1vUzCKF76LM44asSN39XkjB8-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : '1vUzCKF76LM44asSN39XkjB8-gzGzoHsz',
            'X-LC-Key'    : 'qWNwcOO6BFrAxr7vtI65ycAA',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  



  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : a0693510cb3f0ffe9af58a8252b84fe53b3d16221c333b1f262546c4489047e8,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri == 'https://cakebytheoceanluo.github.io/2020/09/29/CMU-15445-Lec08/',]
      });
      });
  </script>

</body>
</html>
